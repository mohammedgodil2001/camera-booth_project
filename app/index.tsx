import * as ImagePicker from 'expo-image-picker';
import { router } from 'expo-router';
import { useState } from 'react';
import { Alert, Dimensions, Image, Modal, ScrollView, StyleSheet, Text, TouchableOpacity, View } from 'react-native';
import Svg, { Circle, ClipPath, Defs, G, Line, Path, Rect } from 'react-native-svg';
import CustomButton from '../components/CustomButton';
import { usePhotoStore } from '../stores/photoStore';



const { width } = Dimensions.get('window');

export default function HomeScreen() {
  

  const capturedImages = usePhotoStore(state => state.capturedImages);
  const addImage = usePhotoStore(state => state.addImage);
  const clearAllImages = usePhotoStore(state => state.clearAllImages);
  const MAX_IMAGES = usePhotoStore(state => state.MAX_IMAGES);
  const canAddMore = usePhotoStore(state => state.canAddMore());

  const [showCameraModal, setShowCameraModal] = useState(false);
  const [currentPhotoNumber, setCurrentPhotoNumber] = useState(1);
  const [showGallery, setShowGallery] = useState(false);

  const navigateToUploadScreen = () => {
    router.push('/upload');
  };

  const requestCameraPermission = async () => {
    const { status } = await ImagePicker.requestCameraPermissionsAsync();
    
    if (status !== 'granted') {
      Alert.alert(
        'Permission needed',
        'Sorry, we need camera permissions to take photos!'
      );
      return false;
    }
    return true;
  };

  const startCameraFlow = async () => {
    if (!canAddMore) {
      Alert.alert(
        'Maximum Photos Reached',
        `You can only have ${MAX_IMAGES} photos total. Please remove some photos first.`
      );
      return;
    }

    const hasPermission = await requestCameraPermission();
    if (hasPermission) {
      setShowCameraModal(true);
      setCurrentPhotoNumber(capturedImages.length + 1);
    }
  };

  const navigateToCustomize = () => {
    router.push('/customize');
  };

  const takePhoto = async () => {
    if (!canAddMore) {
      setShowCameraModal(false);
      Alert.alert('Maximum Photos Reached', `You can only have ${MAX_IMAGES} photos total.`);
      return;
    }

    console.log(`Taking photo ${currentPhotoNumber}`);
    
    try {
      let result = await ImagePicker.launchCameraAsync({
        mediaTypes: ['images'],
        allowsEditing: false,
        quality: 0.8,
        exif: false,
      });

      if (!result.canceled && result.assets && result.assets.length > 0) {
        const newImage = result.assets[0].uri;
        console.log(`Photo ${currentPhotoNumber} captured successfully`);
        
        addImage(newImage); 
        
        const newTotal = capturedImages.length + 1;
        if (newTotal < MAX_IMAGES) {
          setCurrentPhotoNumber(newTotal + 1);
        } else {
          setShowCameraModal(false);
          Alert.alert(
            'Photos Captured!',
            `All ${MAX_IMAGES} photos have been taken. View them in the gallery!`,
            [{ text: 'OK' }]
          );
        }
      } else {
        console.log('Photo was cancelled');
      }
    } catch (error) {
      console.error('Camera error:', error);
      Alert.alert('Error', 'Failed to take photo. Please try again.');
    }
  };

  const closeCameraModal = () => {
    setShowCameraModal(false);
    setCurrentPhotoNumber(1);
  };

  const showImageGallery = () => {
    if (capturedImages.length > 0) {
      setShowGallery(true);
    } else {
      Alert.alert('No Photos', 'No photos have been captured or uploaded yet.');
    }
  };

  const clearAllPhotos = () => {
    Alert.alert(
      'Clear All Photos',
      'Are you sure you want to remove all photos?',
      [
        { text: 'Cancel', style: 'cancel' },
        { 
          text: 'Clear All', 
          style: 'destructive',
          onPress: () => clearAllImages() 
        }
      ]
    );
  };

  return (
    <View style={styles.container}>
      
      <View style={styles.leftContainer}>
        
       
          <Svg width="85" height="799" viewBox="0 0 85 799" fill="none" style={{transform: [{ scale: 0.95 }]}}>
            <Path d="M41.1165 787.522V766.58C41.1916 760.5 39.9531 756.072 37.401 753.295C34.849 750.442 31.1711 749.016 26.3672 749.016C21.5634 749.016 17.923 750.442 15.446 753.295C12.894 756.072 11.6179 760.5 11.6179 766.58V787.522H41.1165ZM2.61074 798.218V762.977C2.61074 754.871 4.71242 748.753 8.91578 744.625C13.0441 740.422 18.8612 738.32 26.3672 738.32C33.8732 738.32 39.7279 740.422 43.9313 744.625C48.1346 748.753 50.1988 754.871 50.1237 762.977V787.522H83V798.218H2.61074ZM2.61074 725.21V714.514H37.1759L37.1759 672.181H2.61074V661.484H83V672.181H46.1831L46.1831 714.514H83V725.21H2.61074ZM42.8054 637.764C46.8586 637.764 50.8743 637.239 54.8525 636.188C58.7556 635.137 62.2834 633.486 65.436 631.234C68.5885 628.982 71.1405 626.092 73.0921 622.564C74.9686 619.037 75.9068 614.833 75.9068 609.954C75.9068 605.075 74.9686 600.872 73.0921 597.344C71.1405 593.816 68.5885 590.927 65.436 588.675C62.2834 586.423 58.7556 584.772 54.8525 583.721C50.8743 582.67 46.8586 582.145 42.8054 582.145C38.7521 582.145 34.7739 582.67 30.8708 583.721C26.8926 584.772 23.3273 586.423 20.1748 588.675C17.0223 590.927 14.5078 593.816 12.6313 597.344C10.6797 600.872 9.70391 605.075 9.70391 609.954C9.70391 614.833 10.6797 619.037 12.6313 622.564C14.5078 626.092 17.0223 628.982 20.1748 631.234C23.3273 633.486 26.8926 635.137 30.8708 636.188C34.7739 637.239 38.7521 637.764 42.8054 637.764ZM42.8054 648.46C37.326 648.46 32.0718 647.672 27.0428 646.096C21.9387 644.444 17.4351 642.005 13.532 638.777C9.62885 635.55 6.51386 631.534 4.187 626.73C1.86014 621.926 0.696712 616.334 0.696712 609.954C0.696712 603.574 1.86014 597.982 4.187 593.178C6.51386 588.375 9.62885 584.359 13.532 581.131C17.4351 577.904 21.9387 575.502 27.0428 573.926C32.0718 572.274 37.326 571.449 42.8054 571.449C48.2847 571.449 53.5765 572.274 58.6806 573.926C63.7096 575.502 68.1757 577.904 72.0788 581.131C75.9819 584.359 79.0969 588.375 81.4237 593.178C83.6755 597.982 84.8014 603.574 84.8014 609.954C84.8014 616.334 83.6755 621.926 81.4237 626.73C79.0969 631.534 75.9819 635.55 72.0788 638.777C68.1757 642.005 63.7096 644.444 58.6806 646.096C53.5765 647.672 48.2847 648.46 42.8054 648.46ZM11.6179 540.175V566.971H2.61074L2.61074 502.682H11.6179L11.6179 529.479H83V540.175H11.6179ZM42.8054 487.571C46.8586 487.571 50.8743 487.045 54.8525 485.994C58.7556 484.944 62.2834 483.292 65.436 481.041C68.5885 478.789 71.1405 475.899 73.0921 472.371C74.9686 468.843 75.9068 464.64 75.9068 459.761C75.9068 454.882 74.9686 450.679 73.0921 447.151C71.1405 443.623 68.5885 440.733 65.436 438.482C62.2834 436.23 58.7556 434.578 54.8525 433.528C50.8743 432.477 46.8586 431.951 42.8054 431.951C38.7521 431.951 34.7739 432.477 30.8708 433.528C26.8926 434.578 23.3273 436.23 20.1748 438.482C17.0223 440.733 14.5078 443.623 12.6313 447.151C10.6797 450.679 9.70391 454.882 9.70391 459.761C9.70391 464.64 10.6797 468.843 12.6313 472.371C14.5078 475.899 17.0223 478.789 20.1748 481.041C23.3273 483.292 26.8926 484.944 30.8708 485.994C34.7739 487.045 38.7521 487.571 42.8054 487.571ZM42.8054 498.267C37.326 498.267 32.0718 497.479 27.0428 495.902C21.9387 494.251 17.4351 491.812 13.532 488.584C9.62885 485.356 6.51386 481.341 4.187 476.537C1.86014 471.733 0.696712 466.141 0.696712 459.761C0.696712 453.381 1.86014 447.789 4.187 442.985C6.51386 438.181 9.62885 434.166 13.532 430.938C17.4351 427.71 21.9387 425.308 27.0428 423.732C32.0718 422.081 37.326 421.255 42.8054 421.255C48.2847 421.255 53.5765 422.081 58.6806 423.732C63.7096 425.308 68.1757 427.71 72.0788 430.938C75.9819 434.166 79.0969 438.181 81.4237 442.985C83.6755 447.789 84.8014 453.381 84.8014 459.761C84.8014 466.141 83.6755 471.733 81.4237 476.537C79.0969 481.341 75.9819 485.356 72.0788 488.584C68.1757 491.812 63.7096 494.251 58.6806 495.902C53.5765 497.479 48.2847 498.267 42.8054 498.267ZM37.1759 366.189V344.797C37.1759 338.717 36.125 334.364 34.0233 331.737C31.8466 329.034 28.619 327.683 24.3406 327.683C21.4883 327.683 19.2365 328.134 17.5852 329.034C15.9339 329.935 14.6579 331.174 13.7572 332.75C12.8564 334.326 12.2935 336.165 12.0683 338.267C11.7681 340.293 11.6179 342.47 11.6179 344.797V366.189H37.1759ZM2.61074 376.885V347.724C2.61074 345.998 2.64827 344.159 2.72333 342.207C2.72333 340.181 2.83592 338.192 3.0611 336.24C3.21122 334.289 3.47393 332.487 3.84923 330.836C4.22453 329.109 4.78748 327.646 5.53808 326.445C7.11434 323.818 9.29108 321.603 12.0683 319.802C14.8455 317.925 18.2607 316.987 22.314 316.987C26.5924 316.987 30.3079 318.038 33.4604 320.14C36.5379 322.166 38.8272 325.094 40.3284 328.922H40.5536C41.6044 323.968 43.8562 320.177 47.309 317.55C50.7617 314.923 54.9651 313.61 59.919 313.61C62.8464 313.61 65.6987 314.135 68.4759 315.186C71.2531 316.237 73.7301 317.813 75.9068 319.915C78.0085 321.941 79.7349 324.493 81.086 327.571C82.362 330.573 83 334.063 83 338.042V376.885H2.61074ZM73.9928 366.189V339.393C73.9928 334.664 72.7168 330.986 70.1647 328.359C67.6127 325.657 64.0849 324.306 59.5813 324.306C56.9542 324.306 54.7774 324.793 53.0511 325.769C51.3247 326.745 49.9736 328.059 48.9978 329.71C47.947 331.286 47.2339 333.125 46.8586 335.227C46.4082 337.328 46.1831 339.505 46.1831 341.757V366.189H73.9928ZM42.8054 293.617C46.8586 293.617 50.8743 293.091 54.8525 292.041C58.7556 290.99 62.2834 289.338 65.436 287.087C68.5885 284.835 71.1405 281.945 73.0921 278.417C74.9686 274.889 75.9068 270.686 75.9068 265.807C75.9068 260.928 74.9686 256.725 73.0921 253.197C71.1405 249.669 68.5885 246.779 65.436 244.528C62.2834 242.276 58.7556 240.625 54.8525 239.574C50.8743 238.523 46.8586 237.997 42.8054 237.997C38.7521 237.997 34.7739 238.523 30.8708 239.574C26.8926 240.625 23.3273 242.276 20.1748 244.528C17.0223 246.779 14.5078 249.669 12.6313 253.197C10.6797 256.725 9.70391 260.928 9.70391 265.807C9.70391 270.686 10.6797 274.889 12.6313 278.417C14.5078 281.945 17.0223 284.835 20.1748 287.087C23.3273 289.338 26.8926 290.99 30.8708 292.041C34.7739 293.091 38.7521 293.617 42.8054 293.617ZM42.8054 304.313C37.326 304.313 32.0718 303.525 27.0428 301.949C21.9387 300.297 17.4351 297.858 13.532 294.63C9.62885 291.403 6.51386 287.387 4.187 282.583C1.86014 277.779 0.696712 272.187 0.696712 265.807C0.696712 259.427 1.86014 253.835 4.187 249.031C6.51386 244.227 9.62885 240.212 13.532 236.984C17.4351 233.757 21.9387 231.355 27.0428 229.778C32.0718 228.127 37.326 227.301 42.8054 227.301C48.2847 227.301 53.5765 228.127 58.6806 229.778C63.7096 231.355 68.1757 233.757 72.0788 236.984C75.9819 240.212 79.0969 244.227 81.4237 249.031C83.6755 253.835 84.8014 259.427 84.8014 265.807C84.8014 272.187 83.6755 277.779 81.4237 282.583C79.0969 287.387 75.9819 291.403 72.0788 294.63C68.1757 297.858 63.7096 300.297 58.6806 301.949C53.5765 303.525 48.2847 304.313 42.8054 304.313ZM42.8054 208.075C46.8586 208.075 50.8743 207.549 54.8525 206.499C58.7556 205.448 62.2834 203.796 65.436 201.545C68.5885 199.293 71.1405 196.403 73.0921 192.875C74.9686 189.347 75.9068 185.144 75.9068 180.265C75.9068 175.386 74.9686 171.183 73.0921 167.655C71.1405 164.127 68.5885 161.237 65.436 158.986C62.2834 156.734 58.7556 155.083 54.8525 154.032C50.8743 152.981 46.8586 152.455 42.8054 152.455C38.7521 152.455 34.7739 152.981 30.8708 154.032C26.8926 155.083 23.3273 156.734 20.1748 158.986C17.0223 161.237 14.5078 164.127 12.6313 167.655C10.6797 171.183 9.70391 175.386 9.70391 180.265C9.70391 185.144 10.6797 189.347 12.6313 192.875C14.5078 196.403 17.0223 199.293 20.1748 201.545C23.3273 203.796 26.8926 205.448 30.8708 206.499C34.7739 207.549 38.7521 208.075 42.8054 208.075ZM42.8054 218.771C37.326 218.771 32.0718 217.983 27.0428 216.407C21.9387 214.755 17.4351 212.316 13.532 209.088C9.62885 205.861 6.51386 201.845 4.187 197.041C1.86014 192.237 0.696712 186.645 0.696712 180.265C0.696712 173.885 1.86014 168.293 4.187 163.489C6.51386 158.685 9.62885 154.67 13.532 151.442C17.4351 148.215 21.9387 145.813 27.0428 144.236C32.0718 142.585 37.326 141.759 42.8054 141.759C48.2847 141.759 53.5765 142.585 58.6806 144.236C63.7096 145.813 68.1757 148.215 72.0788 151.442C75.9819 154.67 79.0969 158.685 81.4237 163.489C83.6755 168.293 84.8014 173.885 84.8014 180.265C84.8014 186.645 83.6755 192.237 81.4237 197.041C79.0969 201.845 75.9819 205.861 72.0788 209.088C68.1757 212.316 63.7096 214.755 58.6806 216.407C53.5765 217.983 48.2847 218.771 42.8054 218.771ZM11.6179 110.486V137.282H2.61074V72.9933H11.6179V99.7897H83V110.486H11.6179ZM2.61074 64.0741V53.378H37.1759V11.0442H2.61074V0.348115H83V11.0442H46.1831V53.378H83V64.0741H2.61074Z" fill="black"/>
          </Svg>

      </View>

      
      <View style={styles.rightContainer}>
       
        <View style={styles.photoCounter}>
          <Text style={styles.counterText}>{capturedImages.length}/{MAX_IMAGES}</Text>
          <Text style={styles.photosLabel}>PHOTOS</Text>
        </View>

        
       
          <View style={styles.buttonContainer}>

            <View style={styles.buttonSpacing}>
              <Svg width="205" height="108" viewBox="0 0 205 108" fill="none" >
              <Line x1="0.5" y1="-2.18557e-08" x2="0.500005" y2="108" stroke="black"/>
              <Line x1="6.5" y1="-2.18557e-08" x2="6.5" y2="108" stroke="black"/>
              <Line x1="12.5" y1="-2.18557e-08" x2="12.5" y2="108" stroke="black"/>
              <Line x1="18.5" y1="-2.18557e-08" x2="18.5" y2="108" stroke="black"/>
              <Line x1="24.5" y1="-2.18557e-08" x2="24.5" y2="108" stroke="black"/>
              <Line x1="30.5" y1="-2.18557e-08" x2="30.5" y2="108" stroke="black"/>
              <Line x1="36.5" y1="-2.18557e-08" x2="36.5" y2="108" stroke="black"/>
              <Line x1="42.5" y1="-2.18557e-08" x2="42.5" y2="108" stroke="black"/>
              <Line x1="48.5" y1="-2.18557e-08" x2="48.5" y2="108" stroke="black"/>
              <Line x1="54.5" y1="-2.18557e-08" x2="54.5" y2="108" stroke="black"/>
              <Line x1="60.5" y1="-2.18557e-08" x2="60.5" y2="108" stroke="black"/>
              <Line x1="66.5" y1="-2.18557e-08" x2="66.5" y2="108" stroke="black"/>
              <Line x1="72.5" y1="-2.18557e-08" x2="72.5" y2="108" stroke="black"/>
              <Line x1="78.5" y1="-2.18557e-08" x2="78.5" y2="108" stroke="black"/>
              <Line x1="84.5" y1="-2.18557e-08" x2="84.5" y2="108" stroke="black"/>
              <Line x1="90.5" y1="-2.18557e-08" x2="90.5" y2="108" stroke="black"/>
              <Line x1="96.5" y1="-2.18557e-08" x2="96.5" y2="108" stroke="black"/>
              <Line x1="102.5" y1="-2.18557e-08" x2="102.5" y2="108" stroke="black"/>
              <Line x1="108.5" y1="-2.18557e-08" x2="108.5" y2="108" stroke="black"/>
              <Line x1="114.5" y1="-2.18557e-08" x2="114.5" y2="108" stroke="black"/>
              <Line x1="120.5" y1="-2.18557e-08" x2="120.5" y2="108" stroke="black"/>
              <Line x1="126.5" y1="-2.18557e-08" x2="126.5" y2="108" stroke="black"/>
              <Line x1="132.5" y1="-2.18557e-08" x2="132.5" y2="108" stroke="black"/>
              <Line x1="138.5" y1="-2.18557e-08" x2="138.5" y2="108" stroke="black"/>
              <Line x1="144.5" y1="-2.18557e-08" x2="144.5" y2="108" stroke="black"/>
              <Line x1="150.5" y1="-2.18557e-08" x2="150.5" y2="108" stroke="black"/>
              <Line x1="156.5" y1="-2.18557e-08" x2="156.5" y2="108" stroke="black"/>
              <Line x1="162.5" y1="-2.18557e-08" x2="162.5" y2="108" stroke="black"/>
              <Line x1="168.5" y1="-2.18557e-08" x2="168.5" y2="108" stroke="black"/>
              <Line x1="174.5" y1="-2.18557e-08" x2="174.5" y2="108" stroke="black"/>
              <Line x1="180.5" y1="-2.18557e-08" x2="180.5" y2="108" stroke="black"/>
              <Line x1="186.5" y1="-2.18557e-08" x2="186.5" y2="108" stroke="black"/>
              <Line x1="192.5" y1="-2.18557e-08" x2="192.5" y2="108" stroke="black"/>
              <Line x1="198.5" y1="-2.18557e-08" x2="198.5" y2="108" stroke="black"/>
              <Line x1="204.5" y1="-2.18557e-08" x2="204.5" y2="108" stroke="black"/>
              </Svg>
              <CustomButton
                title="use camera"
                onPress={startCameraFlow}
                disabled={!canAddMore}
                style={styles.actionButton}
                textStyle={styles.actionButtonText}
                disabledStyle={styles.actionButtonDisabled}
                disabledTextStyle={styles.actionButtonTextDisabled}
                showArrow={false}
              />
            </View>


            <View style={styles.buttonSpacing}>
              <Svg width="205" height="108" viewBox="0 0 205 108" fill="none" >
                <Line x1="0.5" y1="-2.18557e-08" x2="0.500005" y2="108" stroke="black"/>
                <Line x1="6.5" y1="-2.18557e-08" x2="6.5" y2="108" stroke="black"/>
                <Line x1="12.5" y1="-2.18557e-08" x2="12.5" y2="108" stroke="black"/>
                <Line x1="18.5" y1="-2.18557e-08" x2="18.5" y2="108" stroke="black"/>
                <Line x1="24.5" y1="-2.18557e-08" x2="24.5" y2="108" stroke="black"/>
                <Line x1="30.5" y1="-2.18557e-08" x2="30.5" y2="108" stroke="black"/>
                <Line x1="36.5" y1="-2.18557e-08" x2="36.5" y2="108" stroke="black"/>
                <Line x1="42.5" y1="-2.18557e-08" x2="42.5" y2="108" stroke="black"/>
                <Line x1="48.5" y1="-2.18557e-08" x2="48.5" y2="108" stroke="black"/>
                <Line x1="54.5" y1="-2.18557e-08" x2="54.5" y2="108" stroke="black"/>
                <Line x1="60.5" y1="-2.18557e-08" x2="60.5" y2="108" stroke="black"/>
                <Line x1="66.5" y1="-2.18557e-08" x2="66.5" y2="108" stroke="black"/>
                <Line x1="72.5" y1="-2.18557e-08" x2="72.5" y2="108" stroke="black"/>
                <Line x1="78.5" y1="-2.18557e-08" x2="78.5" y2="108" stroke="black"/>
                <Line x1="84.5" y1="-2.18557e-08" x2="84.5" y2="108" stroke="black"/>
                <Line x1="90.5" y1="-2.18557e-08" x2="90.5" y2="108" stroke="black"/>
                <Line x1="96.5" y1="-2.18557e-08" x2="96.5" y2="108" stroke="black"/>
                <Line x1="102.5" y1="-2.18557e-08" x2="102.5" y2="108" stroke="black"/>
                <Line x1="108.5" y1="-2.18557e-08" x2="108.5" y2="108" stroke="black"/>
                <Line x1="114.5" y1="-2.18557e-08" x2="114.5" y2="108" stroke="black"/>
                <Line x1="120.5" y1="-2.18557e-08" x2="120.5" y2="108" stroke="black"/>
                <Line x1="126.5" y1="-2.18557e-08" x2="126.5" y2="108" stroke="black"/>
                <Line x1="132.5" y1="-2.18557e-08" x2="132.5" y2="108" stroke="black"/>
                <Line x1="138.5" y1="-2.18557e-08" x2="138.5" y2="108" stroke="black"/>
                <Line x1="144.5" y1="-2.18557e-08" x2="144.5" y2="108" stroke="black"/>
                <Line x1="150.5" y1="-2.18557e-08" x2="150.5" y2="108" stroke="black"/>
                <Line x1="156.5" y1="-2.18557e-08" x2="156.5" y2="108" stroke="black"/>
                <Line x1="162.5" y1="-2.18557e-08" x2="162.5" y2="108" stroke="black"/>
                <Line x1="168.5" y1="-2.18557e-08" x2="168.5" y2="108" stroke="black"/>
                <Line x1="174.5" y1="-2.18557e-08" x2="174.5" y2="108" stroke="black"/>
                <Line x1="180.5" y1="-2.18557e-08" x2="180.5" y2="108" stroke="black"/>
                <Line x1="186.5" y1="-2.18557e-08" x2="186.5" y2="108" stroke="black"/>
                <Line x1="192.5" y1="-2.18557e-08" x2="192.5" y2="108" stroke="black"/>
                <Line x1="198.5" y1="-2.18557e-08" x2="198.5" y2="108" stroke="black"/>
                <Line x1="204.5" y1="-2.18557e-08" x2="204.5" y2="108" stroke="black"/>
              </Svg>
              
              <CustomButton
                title="upload photos"
                onPress={navigateToUploadScreen}
                style={styles.actionButton}
                textStyle={styles.actionButtonText}
                showArrow={false}
                checkPhotoLimit={false}
              />
            </View>
          </View>
        

       
        


       
        <View style={styles.bottomButtons}>
          <TouchableOpacity 
            style={[
              styles.bottomButton,
            ]}
            onPress={showImageGallery}
            disabled={capturedImages.length === 0}
          >
            <Text style={[
              styles.bottomButtonText,
              capturedImages.length === 0 && styles.bottomButtonTextDisabled
            ]}>
              view gallery
            </Text>
           
            <Svg width="13" height="13" viewBox="0 0 13 13" fill="none" >
            <Path d="M12.353 9.84902L12.0196 0.642482L2.81147 0.928064C2.71511 0.918301 2.61777 0.929355 2.52605 0.96048C2.43433 0.991604 2.35037 1.04207 2.27985 1.10847C2.20933 1.17486 2.1539 1.25563 2.11731 1.34531C2.08072 1.43499 2.06383 1.53149 2.06777 1.62826C2.07172 1.72504 2.09641 1.81984 2.14018 1.90624C2.18394 1.99264 2.24576 2.06864 2.32145 2.12907C2.39714 2.1895 2.48493 2.23297 2.57888 2.25653C2.67283 2.28008 2.77074 2.28318 2.86599 2.2656L9.76649 2.06237L0.933264 11.51C0.810801 11.641 0.745386 11.8153 0.75141 11.9945C0.757433 12.1737 0.834402 12.3432 0.965384 12.4657C1.09637 12.5881 1.27063 12.6535 1.44984 12.6475C1.62906 12.6415 1.79853 12.5645 1.921 12.4335L10.7542 2.98586L11.0148 9.88444C11.0215 10.0637 11.0991 10.233 11.2306 10.3551C11.362 10.4772 11.5366 10.542 11.7159 10.5353C11.8952 10.5287 12.0645 10.4511 12.1866 10.3196C12.3087 10.1881 12.3735 10.0135 12.3668 9.83421L12.353 9.84902Z" fill="black"/>
            </Svg>

          </TouchableOpacity>

          <TouchableOpacity 
            style={[
              styles.bottomButton,
            ]}
            onPress={navigateToCustomize}
            disabled={capturedImages.length === 0}
          >
            <Text style={[
              styles.bottomButtonText,
              capturedImages.length === 0 && styles.bottomButtonTextDisabled
            ]}>
              customise photos
            </Text>
            
             <Svg width="13" height="13" viewBox="0 0 13 13" fill="none">
            <Path d="M12.353 9.84902L12.0196 0.642482L2.81147 0.928064C2.71511 0.918301 2.61777 0.929355 2.52605 0.96048C2.43433 0.991604 2.35037 1.04207 2.27985 1.10847C2.20933 1.17486 2.1539 1.25563 2.11731 1.34531C2.08072 1.43499 2.06383 1.53149 2.06777 1.62826C2.07172 1.72504 2.09641 1.81984 2.14018 1.90624C2.18394 1.99264 2.24576 2.06864 2.32145 2.12907C2.39714 2.1895 2.48493 2.23297 2.57888 2.25653C2.67283 2.28008 2.77074 2.28318 2.86599 2.2656L9.76649 2.06237L0.933264 11.51C0.810801 11.641 0.745386 11.8153 0.75141 11.9945C0.757433 12.1737 0.834402 12.3432 0.965384 12.4657C1.09637 12.5881 1.27063 12.6535 1.44984 12.6475C1.62906 12.6415 1.79853 12.5645 1.921 12.4335L10.7542 2.98586L11.0148 9.88444C11.0215 10.0637 11.0991 10.233 11.2306 10.3551C11.362 10.4772 11.5366 10.542 11.7159 10.5353C11.8952 10.5287 12.0645 10.4511 12.1866 10.3196C12.3087 10.1881 12.3735 10.0135 12.3668 9.83421L12.353 9.84902Z" fill="black"/>
            </Svg>
          </TouchableOpacity>

          {capturedImages.length > 0 && (
            <>
              
             
              <CustomButton
                title="clear all photos"
                onPress={clearAllPhotos}
                showArrow={false}
                style={styles.clearPhotosContainer}
                textStyle={styles.clearPhotosText}
                checkPhotoLimit={false}
              />
            </>
          )}
        </View>
      </View>

     
      <Modal
        visible={showCameraModal}
        animationType="slide"
        transparent={true}
      >
        <View style={styles.modalOverlay}>
          <View style={styles.modalContent}>
            <TouchableOpacity 
              style={styles.takePhotoButton} 
              onPress={takePhoto}
            >
              
              <Svg width="114" height="114" viewBox="0 0 114 114" fill="none" >
                <G clip-path="url(#clip0_36_985)">
                <Path d="M30.7747 43.3613C30.8004 43.448 30.9836 43.5412 31.0928 43.538C31.9218 43.5026 32.7507 43.448 33.5765 43.3934C34.2737 43.3452 34.9806 43.3452 35.6617 43.2167C36.6224 43.0399 37.6217 43.1588 38.5502 42.7347C38.9904 42.5355 39.5045 42.5034 39.9833 42.3877C40.9632 42.1467 41.8854 41.7644 42.6244 41.0607C43.0549 40.6495 43.3634 40.1065 43.7843 39.6823C44.4654 38.9915 44.8606 38.0919 45.5932 37.4236C46.2037 36.8645 46.6374 36.0966 47.084 35.3801C47.5531 34.6218 47.9001 33.7864 48.3853 33.0378C48.8287 32.3566 49.4745 31.9807 50.3581 32.0321C51.1485 32.0803 51.9453 32 52.7422 32C53.4587 32 54.1784 32.0353 54.8949 32.0418C56.4307 32.0578 57.9698 32.061 59.5056 32.0771C60.2671 32.0868 61.0286 32.1221 61.79 32.1285C62.2752 32.1285 62.7636 32.0578 63.2455 32.0932C63.9139 32.1446 64.5854 32.2313 65.2376 32.3791C65.5172 32.4434 65.7453 32.7101 66.0087 32.8643C66.857 33.3527 67.5028 34.0531 68.0362 34.8564C68.5181 35.5857 68.9583 36.3408 69.4274 37.0798C69.9447 37.8959 70.4588 38.712 70.9986 39.5153C71.4098 40.1257 71.8179 40.7458 72.3095 41.2889C72.4734 41.4688 72.8846 41.4559 73.1866 41.4752C73.8614 41.5202 74.5361 41.533 75.2108 41.5523C75.2976 41.5523 75.3844 41.5395 75.4679 41.517C76.1137 41.3435 76.7692 41.1892 77.4053 40.9836C78.3885 40.6687 79.3781 40.3635 80.3292 39.9651C81.1614 39.6181 82.0096 39.4574 82.8964 39.4157C83.674 39.3803 84.4611 39.541 85.2323 39.2839C85.4861 39.2004 86.3376 39.8334 86.4372 40.084C86.8034 40.9772 86.9352 41.9154 86.9416 42.8664C86.948 43.9203 86.903 44.9742 86.8966 46.0281C86.8966 46.3526 86.9416 46.6739 86.9705 46.9984C87.0412 47.7535 86.9448 48.4667 86.6492 49.1865C86.4211 49.7455 86.4275 50.3978 86.2508 50.9858C85.907 52.1296 85.8781 53.2895 85.9102 54.4655C85.9327 55.2173 85.8781 55.9692 85.8652 56.721C85.8588 57.1001 85.8652 57.4793 85.8684 57.8584C85.8974 59.4167 85.9488 60.975 85.9584 62.5334C85.9648 63.5487 85.8974 64.5608 85.8813 65.5761C85.8717 66.1062 85.9199 66.6332 85.9166 67.1633C85.9038 68.41 85.8588 69.6566 85.862 70.9033C85.8652 71.8704 85.9456 72.8343 85.952 73.8014C85.9584 74.5533 85.8941 75.3051 85.8813 76.057C85.8652 77.0691 85.8717 78.0812 85.8717 79.0933C85.8717 79.4435 85.9584 79.8194 85.8524 80.1311C85.7464 80.4428 85.5022 80.8058 85.2194 80.9376C84.882 81.095 84.4419 81.0596 84.0467 81.0564C82.7582 81.0532 81.4698 81.0243 80.1846 81.005C79.3139 80.9954 78.4399 81.0018 77.5692 80.9761C76.5603 80.9472 75.5546 80.8861 74.5458 80.854C73.7939 80.8315 73.0388 80.8476 72.2838 80.8251C71.8018 80.8123 71.3167 80.793 70.8411 80.7255C69.8547 80.5809 68.8812 80.3721 67.8916 80.25C67.3004 80.1761 66.6963 80.2211 66.1019 80.2082C65.5589 80.1986 65.0127 80.1696 64.4697 80.1761C62.9371 80.1889 61.4045 80.2114 59.8719 80.2307C59.0718 80.2403 58.2686 80.2725 57.4685 80.2564C56.495 80.2371 55.5214 80.1504 54.5479 80.1439C53.9053 80.1407 53.2627 80.2435 52.6169 80.2628C52.0931 80.2757 51.5694 80.205 51.0489 80.2178C50.583 80.2307 50.1171 80.3078 49.648 80.3528C48.4624 80.4717 47.28 80.6291 46.0912 80.6966C44.851 80.7673 43.6075 80.7512 42.3641 80.7705C41.6315 80.7801 40.8958 80.8058 40.1632 80.7898C39.27 80.7737 38.38 80.703 37.4899 80.6934C36.8313 80.6869 36.1694 80.7705 35.5075 80.7608C34.4793 80.748 33.4351 80.5648 32.4294 80.6934C31.4077 80.8251 30.4406 80.5906 29.4542 80.5327C29.0558 80.5102 28.6092 80.1696 28.3039 79.858C27.8573 79.4049 27.5135 78.8491 27.1408 78.3254C27.0508 78.2001 26.9962 78.0233 26.9962 77.8691C26.993 77.0434 27.0026 76.2144 27.0219 75.3887C27.0348 74.7878 27.0219 74.1806 27.1119 73.5894C27.1954 73.0271 27.4525 72.4905 27.536 71.9282C27.6677 71.0511 28.2621 70.4599 28.7345 69.7916C29.2293 69.0879 29.5474 68.2879 29.7016 67.475C29.9104 66.3793 29.9393 65.2516 30.0036 64.1334C30.0357 63.5551 29.9715 62.9735 29.9683 62.392C29.965 61.6658 29.9875 60.9397 29.9811 60.2136C29.9811 59.8537 29.9169 59.4938 29.9201 59.134C29.9201 58.7548 29.9811 58.3757 29.9843 57.9934C29.9875 57.5725 29.9393 57.1483 29.949 56.7274C29.9586 56.3354 30.055 55.9434 30.0454 55.5547C30.0229 54.5394 29.9554 53.524 29.9265 52.5119C29.9136 52.0493 29.9618 51.5834 29.9715 51.1175C29.994 50.2339 30.0357 49.3471 30.0261 48.4635C30.0229 47.9655 29.9104 47.4675 29.8911 46.9695C29.8783 46.5903 29.9426 46.2112 29.9618 45.8289C29.9811 45.4626 30.0036 45.0963 29.9908 44.7332C29.9908 44.6272 29.8911 44.444 29.8172 44.4344M29.9908 43.3837L84.8949 80.2243C84.9752 79.6491 85.0973 78.9712 85.1552 78.2868C85.1809 77.9687 85.0491 77.6442 85.0491 77.3197C85.0491 76.6032 85.1134 75.8867 85.1102 75.1702C85.107 74.3958 85.0427 73.6183 85.0298 72.844C85.017 71.9057 85.0331 70.9675 85.0298 70.0293C85.0298 69.5699 85.0074 69.1104 85.0041 68.651C84.9977 68.2815 84.9784 67.9087 85.0041 67.5425C85.0331 67.1569 85.1519 66.7746 85.1487 66.3922C85.1487 65.5697 85.0652 64.7503 85.062 63.9278C85.0588 62.7808 84.8788 61.6434 85.123 60.4835C85.2483 59.8955 85.0877 59.2304 85.1134 58.5878C85.1487 57.6303 84.9881 56.6664 85.0138 55.7057C85.0459 54.594 84.9559 53.4726 85.2194 52.3738C85.2644 52.181 85.1776 51.9593 85.2194 51.7633C85.3447 51.1785 85.5118 50.6034 85.65 50.0218C85.6885 49.858 85.6146 49.6395 85.6982 49.5174C86.0323 49.0387 86.1159 48.4892 86.1897 47.9398C86.2347 47.6057 86.2669 47.2683 86.2572 46.9309C86.2508 46.706 86.1158 46.4779 86.1223 46.2562C86.1383 45.5461 86.1962 44.8392 86.2283 44.1292C86.2379 43.93 86.209 43.7275 86.1962 43.5283C86.148 42.8279 86.5111 42.076 85.9423 41.4334C85.8974 41.382 85.9231 41.2631 85.9295 41.1796C85.9713 40.5017 85.8074 40.28 85.1134 40.2125C84.7278 40.1771 84.3326 40.2735 83.9471 40.235C83.1984 40.1579 82.4562 40.0422 81.7301 40.3603C81.4023 40.5049 81.0714 40.643 80.7308 40.7587C80.13 40.9643 79.5195 41.1507 78.9155 41.3467C78.3339 41.533 77.7556 41.729 77.1708 41.8993C76.7049 42.0375 76.2326 42.1821 75.7539 42.2495C75.243 42.3234 74.7193 42.3138 74.202 42.3395C74.1763 42.3395 74.1538 42.301 74.1281 42.301C73.8742 42.2849 73.5915 42.1885 73.3762 42.272C72.6083 42.5676 71.9946 42.2592 71.5448 41.7322C71.005 41.1025 70.5937 40.3603 70.1278 39.6663C70.1021 39.6309 70.0989 39.5827 70.0764 39.5442C69.8001 39.0333 69.5238 38.5257 69.2443 38.018C69.225 37.9826 69.1704 37.9698 69.1447 37.9377C68.8555 37.5553 68.5502 37.1826 68.29 36.781C67.9719 36.299 67.6988 35.7882 67.3936 35.2966C67.2393 35.0459 67.0947 34.7793 66.8923 34.5704C66.6514 34.323 66.3108 34.1688 66.0891 33.9085C65.4947 33.2049 64.6657 32.9832 63.84 32.9254C62.6704 32.845 61.488 32.9254 60.3088 32.9318C60.1771 32.9318 60.0454 32.8996 59.9136 32.8964C59.3546 32.8804 58.7827 32.7936 58.2364 32.8772C57.5746 32.9768 56.9287 32.7101 56.2572 32.9254C55.9038 33.0378 55.47 32.8804 55.0716 32.8739C54.3069 32.8611 53.539 32.8675 52.7743 32.8707C52.6137 32.8707 52.4562 32.89 52.2956 32.8772C51.5437 32.8193 50.7822 33.1053 50.0336 32.8097C49.9276 32.7679 49.7316 32.7936 49.6577 32.8707C49.3171 33.2242 48.9508 33.5712 48.7002 33.9856C48.3628 34.5447 48.17 35.1937 47.823 35.7496C47.4182 36.4018 46.917 36.993 46.4575 37.6132C46.4222 37.6613 46.3997 37.7224 46.3579 37.761C45.5257 38.5192 44.9088 39.4542 44.2341 40.341C43.8485 40.8487 43.4565 41.3692 42.9906 41.7997C42.6469 42.1178 42.181 42.3074 41.7568 42.5355C41.4355 42.709 41.1142 42.905 40.7672 42.9885C40.4042 43.0753 40.0379 43.0753 39.7101 43.3227C39.5013 43.4801 39.1993 43.5283 38.9294 43.5797C38.4635 43.6665 37.988 43.7115 37.5189 43.7854C36.7767 43.9043 36.0344 44.0296 35.2955 44.1581C34.6175 44.277 33.8978 43.9203 33.2423 44.3444C33.1845 44.383 33.072 44.3348 32.9853 44.3348C32.2527 44.3444 31.5009 44.1227 30.8422 44.5083C30.8422 45.1123 30.8486 45.71 30.8422 46.3108C30.8326 47.0691 30.8101 47.8274 30.8004 48.5888C30.8004 48.878 30.8326 49.1672 30.8294 49.4564C30.8229 50.1889 30.8036 50.9183 30.7972 51.6509C30.7972 51.9143 30.8422 52.181 30.8326 52.4445C30.8036 53.3441 30.7522 54.2405 30.733 55.1402C30.7265 55.4165 30.8261 55.6928 30.8165 55.9692C30.7844 56.8977 30.7265 57.8231 30.6816 58.7516C30.6816 58.7934 30.6944 58.8384 30.6976 58.8834C30.733 59.2978 30.7972 59.7123 30.7908 60.1268C30.7812 60.8369 30.7233 61.547 30.688 62.257C30.6816 62.3759 30.6783 62.4948 30.688 62.6105C30.8165 63.9182 30.7651 65.213 30.4759 66.495C30.4599 66.5657 30.4534 66.6428 30.447 66.7135C30.402 67.1698 30.3763 67.6292 30.3153 68.0855C30.1932 69.0397 29.6405 69.7852 29.104 70.537C28.9112 70.8069 28.6349 71.0382 28.5128 71.337C28.2621 71.9539 28.0951 72.603 27.8926 73.2392C27.8669 73.3227 27.822 73.4062 27.8187 73.493C27.7995 74.1002 27.7802 74.7043 27.7738 75.3116C27.7673 75.8642 27.793 76.4168 27.7738 76.9695C27.7577 77.4129 27.6163 77.8466 27.9955 78.2418C28.2814 78.5406 28.4549 78.9487 28.7409 79.2475C29.2935 79.8226 30.0743 79.8066 30.7876 79.9158C31.2535 79.9865 31.7386 79.919 32.2174 79.9062C32.4037 79.8998 32.5901 79.8483 32.7764 79.8516C33.5926 79.874 34.4087 79.9255 35.2248 79.9351C35.9895 79.9447 36.7542 79.8933 37.5157 79.903C38.4057 79.9158 39.2957 79.9961 40.1825 79.9865C41.4355 79.9769 42.6886 79.874 43.9417 79.8805C45.2205 79.8869 46.4961 79.8933 47.7716 79.7487C48.456 79.6716 49.1436 79.5624 49.8312 79.5592C50.4063 79.556 50.914 79.2796 51.5501 79.3953C52.4177 79.5495 53.343 79.376 54.2427 79.3407C54.4194 79.3343 54.5961 79.3214 54.7728 79.331C55.303 79.36 55.8331 79.4146 56.3632 79.4242C56.8131 79.4339 57.2629 79.3825 57.7159 79.3792C58.0501 79.376 58.3875 79.4178 58.7248 79.4146C59.3449 79.4082 59.965 79.3632 60.5819 79.3664C61.2792 79.3696 61.9764 79.4242 62.6768 79.4274C63.5411 79.4274 64.4022 79.4017 65.2665 79.3857C65.7196 79.376 66.1694 79.3664 66.6224 79.3535C66.8827 79.3471 67.1462 79.3086 67.4064 79.3343C67.8498 79.3825 68.2932 79.466 68.7334 79.5431C69.2925 79.6427 69.8483 79.7519 70.4074 79.8516C70.6773 79.8997 70.9472 79.9608 71.2203 79.9769C71.8083 80.0122 72.3995 80.0122 72.9874 80.0508C73.614 80.0925 74.2373 80.1793 74.8638 80.2082C75.455 80.2371 76.0494 80.2082 76.6439 80.2211C77.0101 80.2275 77.3796 80.2821 77.7459 80.2692C78.7195 80.2403 79.693 80.1857 80.6666 80.1407C80.7115 80.1407 80.7533 80.1536 80.7983 80.1536C81.473 80.1793 82.1478 80.2114 82.8225 80.2243C83.4651 80.2371 84.1077 80.2243 84.8917 80.2243L29.9908 43.3837Z" fill="black"/>
                <Path d="M54.3077 45.4853C55.2299 45.4853 56.1488 45.4756 57.0709 45.4885C57.5433 45.4949 58.0124 45.5528 58.4847 45.556C59.3104 45.5624 60.1362 45.5271 60.9619 45.5431C61.8391 45.5624 62.7162 45.6395 63.5966 45.6588C64.7308 45.6845 65.8618 45.6684 66.996 45.6941C67.6803 45.7102 68.3968 45.617 68.988 46.0861C69.2354 46.2821 69.4604 46.5199 69.6563 46.7673C70.0869 47.3167 70.5046 47.879 70.903 48.4541C71.1343 48.7883 71.3078 49.1578 71.5167 49.508C71.687 49.7875 71.8701 50.0606 72.0468 50.337C72.3264 50.7707 72.6091 51.2045 72.8854 51.6382C72.9497 51.7378 73.0043 51.8439 73.0493 51.9531C73.4252 52.872 73.8076 53.7909 74.161 54.7163C74.2638 54.983 74.2606 55.2914 74.3313 55.5742C74.5144 56.3003 74.7554 57.0136 74.9 57.7462C75.0928 58.739 75.1828 59.7383 75.1346 60.7632C75.0671 62.2026 75.157 63.6517 75.1153 65.0944C75.0799 66.3892 75.0221 67.6905 74.8422 68.9693C74.7683 69.4962 74.6976 70.1227 74.1996 70.5276C74.1032 70.6047 74.071 70.7589 73.9971 70.8682C73.7947 71.1798 73.6116 71.5108 73.3706 71.7903C72.9529 72.2787 72.5063 72.7446 72.0533 73.2008C71.2307 74.0298 70.1576 74.4218 69.1037 74.8395C68.9334 74.9069 68.7246 74.8844 68.535 74.8812C67.6836 74.8716 66.8321 74.8266 65.9807 74.8459C65.036 74.8684 64.0978 74.7109 63.1371 74.9551C62.517 75.1126 61.8069 74.9166 61.1354 74.8748C60.2711 74.8234 59.3972 74.8234 58.5393 74.6981C57.2444 74.5085 56.0171 74.0683 54.8636 73.4354C54.568 73.2715 54.2338 73.1848 53.9254 73.0466C53.0032 72.6321 52.0843 72.2048 51.1622 71.7903C50.9051 71.6746 50.6417 71.4915 50.3814 71.4915C49.7902 71.4915 49.3918 71.1027 48.9034 70.8971C48.1644 70.5822 47.3901 70.338 46.6961 69.9492C45.6037 69.3388 44.3731 69.0046 43.4156 68.0953C42.5609 67.2824 41.732 66.4567 41.1086 65.4735C40.646 64.7441 40.0419 64.0469 39.9584 63.1184C39.9455 62.9866 39.9262 62.8549 39.9262 62.7232C39.9198 61.7175 39.878 60.7118 39.9262 59.7061C39.9809 58.5912 40.1158 57.4763 40.2218 56.3646C40.254 56.0272 40.3182 55.6898 40.3439 55.3525C40.3953 54.6617 40.7488 54.109 41.1311 53.566C41.2918 53.3379 41.4267 53.0873 41.536 52.8335C41.7545 52.3322 42.0918 51.9884 42.5995 51.7667C43.0364 51.5772 43.4092 51.2334 43.8493 51.0663C44.7522 50.7225 45.5073 49.9932 46.5611 50.0446C46.786 50.0574 46.9596 49.5819 46.9114 49.2445C46.8535 48.8429 46.7957 48.4316 46.815 48.03C46.8246 47.8212 46.9499 47.5256 47.117 47.4356C47.6182 47.1657 48.1548 46.9536 48.6914 46.7576C49.2729 46.5456 49.8641 46.3528 50.4617 46.1986C51.2264 45.9994 52.004 45.8355 52.7783 45.6749C53.2796 45.572 53.7904 45.511 54.2981 45.4307C54.2981 45.4435 54.3045 45.4596 54.3077 45.4724V45.4853ZM55.4323 47.5962C55.4676 47.6284 55.503 47.6605 55.5383 47.6926C55.4516 47.8501 55.4002 48.0525 55.2716 48.1617C54.6708 48.6662 54.0507 49.1417 53.437 49.6301C53.4049 49.6558 53.3792 49.6976 53.3631 49.7361C53.2153 50.1217 52.8908 50.1956 52.5374 50.1988C51.6249 50.2084 50.7124 50.1763 49.7999 50.2213C48.9484 50.2631 48.0873 50.2341 47.2841 50.6615C46.8696 50.88 46.3684 50.9314 45.9089 51.0631C45.4559 51.1948 44.9675 51.2623 44.5691 51.4872C43.8654 51.8824 43.2132 52.3708 42.5416 52.827C42.4677 52.8785 42.4099 52.962 42.3649 53.0423C42.095 53.5275 41.8573 54.0319 41.5617 54.4978C41.1825 55.0954 40.9191 55.7156 40.9223 56.4321C40.9223 56.6441 40.9159 56.8594 40.8998 57.0747C40.8387 57.91 40.7713 58.7454 40.7134 59.584C40.6974 59.8186 40.6909 60.0531 40.7006 60.2877C40.7199 60.8917 40.8259 61.5054 40.7488 62.0934C40.6781 62.63 40.7681 63.1216 40.903 63.6099C40.9769 63.8766 41.2018 64.0951 41.3528 64.3425C41.5938 64.7441 41.7962 65.1747 42.0758 65.5442C42.4774 66.0776 42.9304 66.5691 43.3642 67.0768C43.4124 67.1314 43.4702 67.1796 43.528 67.2182C43.8847 67.4656 44.3281 67.6455 44.5819 67.97C45.1474 68.6897 46.0728 68.6319 46.7475 69.101C47.0367 69.3002 47.4254 69.3548 47.7532 69.5026C48.4665 69.8304 49.1637 70.1934 49.8834 70.5083C50.3043 70.6915 50.767 70.7814 51.1879 70.9646C52.0201 71.3276 52.8394 71.7228 53.6619 72.1084C54.4266 72.465 55.1817 72.8538 55.9624 73.1751C56.6629 73.4611 57.3858 73.7021 58.1184 73.9013C58.6196 74.0394 59.1466 74.0876 59.6638 74.139C59.8791 74.1615 60.1072 74.0716 60.3289 74.0748C60.8687 74.0844 61.4053 74.123 61.9451 74.1358C62.2503 74.1422 62.5588 74.1197 62.864 74.1197C63.4199 74.1197 63.9789 74.1487 64.5348 74.1197C65.322 74.0812 66.1092 73.9495 66.8932 74.1583C66.9831 74.1808 67.0891 74.1422 67.1887 74.1294C67.4458 74.1005 67.706 74.0716 67.9631 74.0491C68.2394 74.0266 68.5189 74.033 68.7921 73.9848C69.3351 73.8916 69.8684 73.8177 70.3247 73.4193C70.6942 73.0948 71.2115 72.9374 71.5777 72.6096C72.0725 72.1727 72.5609 71.6939 72.9144 71.1477C73.3513 70.473 73.769 69.7372 73.9747 68.9693C74.206 68.1114 74.2317 67.1893 74.2703 66.2928C74.3152 65.2486 74.2703 64.2011 74.2863 63.1569C74.2927 62.6171 74.3442 62.0806 74.3538 61.5408C74.3538 61.3383 74.267 61.1327 74.267 60.9303C74.2703 60.1174 74.2992 59.3077 74.3024 58.4948C74.3024 58.3502 74.251 58.2056 74.2092 58.0643C74.0421 57.4763 73.8847 56.8851 73.7016 56.3035C73.5216 55.738 73.316 55.179 73.1168 54.6199C73.03 54.3821 72.9176 54.1508 72.834 53.9098C72.6477 53.37 72.4742 52.8238 72.291 52.2808C72.2685 52.2134 72.2332 52.1491 72.1979 52.088C71.989 51.7282 71.7802 51.3715 71.5745 51.0085C71.5103 50.896 71.4878 50.7482 71.4042 50.6583C70.8387 50.051 70.3696 49.3859 70.119 48.5826C70.0676 48.422 69.9327 48.2838 69.817 48.1521C69.5632 47.8661 69.3029 47.5866 69.033 47.3135C68.8788 47.1561 68.6957 47.0275 68.5382 46.8733C68.1334 46.4877 67.6097 46.5906 67.1277 46.5295C66.7357 46.4781 66.3373 46.4653 65.9421 46.4524C65.6979 46.446 65.4537 46.4749 65.2095 46.4781C64.7726 46.4781 64.3324 46.4781 63.8954 46.4717C63.1532 46.462 62.4078 46.4588 61.6656 46.4331C60.9587 46.4074 60.2518 46.3239 59.5418 46.3207C58.8574 46.3207 58.1634 46.4685 57.4886 46.401C56.9906 46.3496 56.5215 46.2918 56.0396 46.4428C56.001 46.4556 55.9528 46.4363 55.9078 46.4331C55.1206 46.401 54.3334 46.3657 53.5463 46.34C53.3567 46.3335 53.1575 46.3367 52.9743 46.3817C52.5309 46.4942 52.0972 46.6516 51.6506 46.7641C51.1525 46.8894 50.6353 46.944 50.1501 47.0982C49.5043 47.3039 48.8938 47.6187 48.2415 47.8083C47.7564 47.9497 47.6214 48.2742 47.5797 48.6887C47.5475 49.0035 47.5732 49.3248 47.5732 49.6719C48.0231 49.6204 48.5211 49.553 49.0223 49.508C50.1372 49.4052 51.2522 49.2509 52.3767 49.3891C52.4474 49.3987 52.5406 49.3923 52.5888 49.3538C53.0547 48.9939 53.5655 48.6758 53.9607 48.2485C54.3816 47.7922 54.8893 47.683 55.4291 47.5866L55.4323 47.5962Z" fill="black"/>
                <Path d="M57.5947 40.1483C56.9938 40.1483 56.5569 40.2126 56.1488 40.129C55.7343 40.0455 55.3199 39.8623 54.96 39.6342C54.6162 39.4157 54.311 39.1137 54.0539 38.7924C53.5848 38.2076 53.8965 37.0959 54.613 36.8003C55.2749 36.5304 55.94 36.1899 56.6982 36.3409C57.0967 36.418 57.5304 36.4598 57.871 36.6525C58.4397 36.9803 59.0181 37.3465 59.4614 37.8221C60.2101 38.6253 60.0044 39.3386 58.9538 39.7692C58.4718 39.9684 57.9449 40.0519 57.5947 40.1451V40.1483ZM57.4854 37.1859C57.4854 37.1859 57.4822 37.1506 57.4629 37.1409C56.7689 36.8035 55.1753 37.0542 54.6194 37.5972C54.4074 37.8028 54.2692 38.0341 54.478 38.3394C54.915 38.982 55.5126 39.4093 56.2773 39.4671C56.9424 39.5185 57.6268 39.4479 58.2919 39.3643C58.5811 39.329 58.8767 39.1619 59.1209 38.9852C59.349 38.8213 59.3908 38.5739 59.0984 38.3779C58.9763 38.5225 58.8927 38.6896 58.7546 38.7828C57.6268 39.5443 56.5215 39.3643 55.5769 38.5996C55.3006 38.3747 55.2428 38.0984 55.4966 37.8381C55.6444 37.6871 55.8404 37.5425 56.0396 37.4879C56.5151 37.3594 57.0067 37.2855 57.4854 37.1891V37.1859ZM56.2998 38.1691C56.6661 38.7089 57.1834 38.7538 57.9578 38.3137C57.4051 38.2655 56.8525 38.2173 56.2998 38.1691Z" fill="black"/>
                <Path d="M55.4322 47.596C54.8924 47.6956 54.3847 47.8016 53.9638 48.2579C53.5686 48.6852 53.0578 49.0033 52.5919 49.3632C52.5405 49.4017 52.4473 49.4049 52.3798 49.3985C51.2553 49.2604 50.1403 49.4114 49.0254 49.5174C48.5274 49.5656 48.0294 49.6299 47.5763 49.6813C47.5763 49.3343 47.5506 49.013 47.5828 48.6981C47.6245 48.2836 47.7627 47.9591 48.2447 47.8177C48.8937 47.6281 49.5074 47.3133 50.1532 47.1076C50.6384 46.9534 51.1557 46.8988 51.6537 46.7735C52.1003 46.661 52.5308 46.5036 52.9774 46.3911C53.1606 46.3429 53.3598 46.3429 53.5494 46.3494C54.3365 46.3751 55.1237 46.4104 55.9109 46.4425C55.9559 46.4425 56.0041 46.4618 56.0427 46.4522C56.5246 46.3012 56.9937 46.359 57.4917 46.4104C58.1665 46.4811 58.8605 46.3301 59.5449 46.3301C60.2517 46.3301 60.9586 46.4168 61.6687 46.4425C62.4109 46.4682 63.1563 46.4715 63.8985 46.4811C64.3355 46.4875 64.7757 46.4907 65.2126 46.4875C65.4568 46.4875 65.701 46.4554 65.9452 46.4618C66.3404 46.4747 66.7388 46.4907 67.1308 46.5389C67.6128 46.6 68.1365 46.4939 68.5413 46.8827C68.702 47.0337 68.8819 47.1655 69.0361 47.3229C69.306 47.596 69.5663 47.8755 69.8201 48.1615C69.9358 48.2932 70.0739 48.4314 70.1221 48.592C70.3728 49.3953 70.8419 50.0604 71.4073 50.6677C71.4909 50.7576 71.5134 50.9054 71.5776 51.0179C71.7833 51.381 71.9953 51.7376 72.201 52.0975C72.2363 52.1585 72.2716 52.2228 72.2941 52.2902C72.4773 52.8332 72.6508 53.3795 72.8371 53.9192C72.9207 54.1602 73.0331 54.3883 73.1199 54.6293C73.3191 55.1884 73.5247 55.7474 73.7047 56.3129C73.8878 56.8945 74.0484 57.4857 74.2123 58.0737C74.2509 58.2151 74.3055 58.3596 74.3055 58.5042C74.2991 59.3171 74.2734 60.1268 74.2701 60.9397C74.2701 61.1421 74.3601 61.3477 74.3569 61.5502C74.3473 62.09 74.2958 62.6265 74.2894 63.1663C74.2766 64.2106 74.3216 65.258 74.2734 66.3022C74.2348 67.1987 74.2059 68.1208 73.9778 68.9787C73.7721 69.7466 73.3544 70.4792 72.9175 71.1571C72.564 71.7065 72.0757 72.1853 71.5808 72.619C71.2113 72.9435 70.6973 73.1042 70.3278 73.4287C69.8715 73.8271 69.3382 73.901 68.7952 73.9942C68.522 74.0392 68.2425 74.0328 67.9662 74.0585C67.7059 74.081 67.4489 74.1131 67.1919 74.1388C67.0923 74.1484 66.9862 74.1902 66.8963 74.1677C66.1123 73.9621 65.3251 74.0906 64.5379 74.1292C63.982 74.1549 63.423 74.1292 62.8671 74.1292C62.5619 74.1292 62.2534 74.1516 61.9482 74.1452C61.4084 74.1324 60.8718 74.0906 60.3321 74.0842C60.1104 74.081 59.8854 74.1709 59.667 74.1484C59.1497 74.0938 58.6195 74.0456 58.1215 73.9107C57.3921 73.7115 56.666 73.4705 55.9656 73.1845C55.1848 72.8664 54.4297 72.4777 53.665 72.1178C52.8425 71.7322 52.0232 71.337 51.191 70.974C50.7701 70.7908 50.3074 70.7009 49.8865 70.5177C49.1668 70.2028 48.4696 69.8398 47.7563 69.512C47.4285 69.361 47.0398 69.3096 46.7506 69.1104C46.0759 68.6445 45.1505 68.6991 44.585 67.9794C44.328 67.6549 43.8878 67.475 43.5312 67.2276C43.4733 67.1858 43.4155 67.1408 43.3673 67.0862C42.9335 66.5786 42.4805 66.087 42.0789 65.5536C41.7993 65.1809 41.5969 64.7503 41.3559 64.3519C41.2081 64.1045 40.98 63.886 40.9061 63.6194C40.768 63.131 40.6812 62.6394 40.7519 62.1028C40.829 61.5116 40.723 60.8979 40.7037 60.2971C40.6973 60.0625 40.7037 59.828 40.7165 59.5934C40.7744 58.7581 40.8419 57.9227 40.9029 57.0841C40.919 56.872 40.9254 56.6567 40.9254 56.4415C40.9222 55.725 41.1856 55.1048 41.5648 54.5072C41.8604 54.0381 42.0981 53.5369 42.368 53.0517C42.413 52.9714 42.4709 52.8879 42.5448 52.8365C43.2131 52.3802 43.8653 51.8918 44.5722 51.4966C44.9738 51.2717 45.4622 51.2042 45.912 51.0725C46.3715 50.9376 46.8759 50.8894 47.2872 50.6709C48.0904 50.2435 48.9515 50.2725 49.803 50.2307C50.7123 50.1857 51.628 50.2178 52.5405 50.2082C52.8939 50.205 53.2184 50.1279 53.3662 49.7455C53.3823 49.707 53.408 49.6652 53.4401 49.6395C54.0538 49.1511 54.6739 48.6756 55.2748 48.1711C55.4033 48.0619 55.4547 47.8595 55.5414 47.702C55.5061 47.6699 55.4707 47.6378 55.4354 47.6056L55.4322 47.596ZM53.8225 53.4116C53.9413 53.3184 53.9928 53.2927 54.0185 53.2541C54.0956 53.1385 54.163 53.0164 54.2369 52.8975C54.0924 52.8654 53.9221 52.7626 53.8064 52.8075C52.9389 53.1385 52.0007 53.2734 51.3613 54.1281C50.9661 54.6518 50.2753 54.9506 49.7419 55.378C49.0543 55.9274 48.3796 56.5411 48.1354 57.3957C47.8816 58.2825 47.7659 59.2207 47.6952 60.1461C47.6599 60.612 47.7916 61.1196 47.9587 61.563C48.1483 62.0643 48.5467 62.4884 48.7009 62.9928C48.8873 63.6001 49.2889 64.0306 49.6359 64.5126C49.7194 64.625 49.8544 64.7054 49.9733 64.7889C50.2239 64.9656 50.4745 65.1391 50.7315 65.303C51.5541 65.8299 52.3348 66.4629 53.2216 66.842C54.2241 67.2726 55.3101 67.5585 56.3897 67.7545C58.491 68.1369 60.6084 68.4614 62.729 68.712C63.7539 68.8341 64.8014 68.6895 65.746 68.1915C66.395 67.8509 67.0087 67.4364 67.6642 67.1055C68.3453 66.7617 68.8755 66.2637 69.094 65.5504C69.3317 64.7696 69.5084 63.9535 69.5631 63.1438C69.6048 62.5623 69.4924 61.9325 69.2932 61.3831C68.853 60.1654 68.2875 58.9926 67.828 57.7781C67.465 56.8142 67.1726 55.8599 66.4015 55.0824C65.5436 54.218 64.6054 53.569 63.4294 53.2895C61.99 52.9457 60.5184 52.8557 59.0501 52.875C58.1119 52.8879 57.1769 53.0581 56.2387 53.1578C55.4675 53.2381 54.6964 53.3184 53.8257 53.4084L53.8225 53.4116Z" fill="white"/>
                <Path d="M57.4849 37.186C57.0061 37.2824 56.5146 37.3563 56.039 37.4848C55.8398 37.5394 55.6438 37.6808 55.496 37.835C55.2422 38.0985 55.2968 38.3748 55.5764 38.5965C56.521 39.3612 57.6263 39.5379 58.754 38.7797C58.889 38.6865 58.9757 38.5226 59.0978 38.3748C59.3902 38.5708 59.3484 38.8182 59.1203 38.9821C58.8761 39.1588 58.5805 39.3259 58.2914 39.3612C57.6263 39.4447 56.9419 39.5154 56.2768 39.464C55.5153 39.4062 54.9145 38.9789 54.4775 38.3363C54.2687 38.031 54.4068 37.7997 54.6189 37.594C55.1747 37.0543 56.7684 36.8036 57.4624 37.1378C57.4817 37.1474 57.4849 37.186 57.4849 37.1828V37.186Z" fill="white"/>
                <Path d="M56.2993 38.1689C56.852 38.2171 57.4046 38.2653 57.9572 38.3135C57.1829 38.7537 56.6656 38.7087 56.2993 38.1689Z" fill="white"/>
                <Path d="M78.4342 53.8773C78.2671 53.662 78.0582 53.466 77.9426 53.2251C77.7819 52.8845 77.6759 52.5118 77.5795 52.1455C77.5474 52.0266 77.6309 51.8788 77.6598 51.7471C77.7691 51.8178 77.8847 51.8788 77.9876 51.9591C78.0293 51.9913 78.0325 52.0909 78.0743 52.1069C78.974 52.4764 78.2864 53.2636 78.6077 53.7809C78.5498 53.813 78.492 53.8452 78.4342 53.8773Z" fill="white"/>
                <Path d="M53.8223 53.4116C54.693 53.3216 55.4641 53.2413 56.2352 53.161C57.1734 53.0614 58.1084 52.8911 59.0466 52.8782C60.515 52.859 61.9898 52.9489 63.426 53.2927C64.602 53.5755 65.5402 54.2213 66.398 55.0856C67.1692 55.8631 67.4615 56.8174 67.8246 57.7813C68.2841 58.9926 68.8496 60.1654 69.2898 61.3863C69.489 61.939 69.6014 62.5687 69.5596 63.1471C69.5018 63.9568 69.3283 64.7761 69.0905 65.5536C68.8753 66.2637 68.3451 66.7617 67.6608 67.1087C67.0053 67.4397 66.3916 67.8509 65.7426 68.1947C64.7979 68.6927 63.7505 68.8341 62.7255 68.7152C60.605 68.4646 58.4876 68.1401 56.3863 67.7578C55.3099 67.5618 54.2239 67.2758 53.2182 66.8453C52.3314 66.4661 51.5539 65.8332 50.7281 65.3062C50.4711 65.1424 50.2205 64.9689 49.9698 64.7921C49.851 64.7086 49.716 64.6283 49.6325 64.5158C49.2855 64.0339 48.8806 63.6033 48.6975 62.9961C48.5433 62.4916 48.1416 62.0643 47.9553 61.5663C47.7882 61.1197 47.6565 60.6152 47.6918 60.1493C47.7625 59.224 47.8782 58.2858 48.132 57.399C48.3762 56.5443 49.0509 55.9306 49.7385 55.3812C50.2719 54.9539 50.9659 54.6583 51.3579 54.1313C51.9973 53.2767 52.9355 53.1449 53.803 52.8108C53.9186 52.7658 54.0889 52.8654 54.2335 52.9007C54.1628 53.0196 54.0922 53.1417 54.015 53.2574C53.9893 53.2992 53.9379 53.3216 53.819 53.4148L53.8223 53.4116ZM58.0827 54.2663C58.0924 54.308 58.0988 54.353 58.1084 54.3948C58.4137 54.4333 58.7221 54.4558 59.0241 54.5137C59.8306 54.6743 60.6339 54.8446 61.4371 55.0245C61.5689 55.0535 61.6845 55.1595 61.8098 55.2334C61.6845 55.3201 61.5689 55.4294 61.4307 55.484C61.3472 55.5161 61.2283 55.4712 61.1287 55.4519C60.7881 55.378 60.4507 55.2687 60.1037 55.2238C59.641 55.1659 59.1623 55.2109 58.7093 55.1241C57.5301 54.896 56.3477 54.6775 55.146 54.8414C54.0343 54.9924 52.8359 54.9121 51.9812 55.8664C51.9555 55.8953 51.9009 55.8953 51.9009 55.8953C51.7402 55.8021 51.6117 55.6607 51.48 55.6607C50.8149 55.6575 49.8477 56.5636 49.8092 57.2062C49.7963 57.3925 49.8317 57.5821 49.8156 57.7685C49.7514 58.4561 49.6582 59.1404 49.61 59.8312C49.5522 60.6763 49.5329 61.5245 49.4847 62.3727C49.4654 62.6972 49.504 62.98 49.761 63.2145C50.0534 63.4812 50.365 63.7383 50.6124 64.0467C51.3322 64.9431 52.3443 65.4444 53.3082 65.9681C54.015 66.3537 54.8504 66.5529 55.6505 66.691C56.4248 66.8228 57.2281 66.781 58.0185 66.7971C58.7189 66.8099 59.4226 66.8067 60.123 66.7874C60.5118 66.7778 60.9006 66.6942 61.2925 66.6942C62.1311 66.6942 62.9665 66.7264 63.8051 66.736C64.181 66.7392 64.5634 66.6621 64.9329 66.7103C65.9836 66.8517 66.7836 66.3601 67.5194 65.7239C67.6993 65.5697 67.8503 65.2934 67.8728 65.0556C67.9435 64.3777 67.9564 63.6933 67.9692 63.0089C67.9821 62.3374 68.0238 61.6594 67.9371 61.0008C67.8728 60.4963 67.6318 60.0144 67.4615 59.526C67.3202 59.1276 67.1659 58.7356 67.0181 58.3404C66.8896 57.9966 66.7354 57.656 66.639 57.3026C66.3659 56.3322 65.8261 55.5451 64.9072 55.1402C64.2774 54.8639 63.6188 54.6069 62.9087 54.5362C62.0605 54.4494 61.2219 54.2856 60.3736 54.2052C59.7342 54.1442 59.0852 54.1602 58.4394 54.157C58.3237 54.157 58.208 54.2309 58.0924 54.2695L58.0827 54.2663ZM59.0788 67.5361C60.9005 68.3008 64.4477 68.3104 65.2317 67.5361H59.0788ZM49.173 56.8881C48.3537 57.8584 47.9135 61.216 48.8646 61.6916C48.5754 60.024 48.9192 58.4657 49.173 56.8881ZM68.7949 61.9197C68.4865 62.8643 68.9074 63.719 68.7949 64.5704C68.9299 63.7222 69.2641 62.874 68.7949 61.9197Z" fill="black"/>
                <Path d="M58.0825 54.2664C58.1982 54.2279 58.3138 54.1507 58.4295 54.154C59.0753 54.154 59.7211 54.1411 60.3637 54.2022C61.212 54.2825 62.0506 54.4463 62.8988 54.5331C63.6089 54.6038 64.2676 54.8608 64.8973 55.1371C65.8162 55.542 66.356 56.3292 66.6291 57.2995C66.7287 57.6529 66.8797 57.9903 67.0083 58.3373C67.1561 58.7325 67.3103 59.1245 67.4517 59.5229C67.6252 60.0113 67.8629 60.4933 67.9272 60.9977C68.0139 61.6564 67.969 62.3375 67.9593 63.0058C67.9465 63.687 67.9368 64.3746 67.8629 65.0525C67.8372 65.2871 67.6894 65.5634 67.5095 65.7208C66.7737 66.3538 65.9737 66.8454 64.923 66.7072C64.5567 66.659 64.1712 66.7362 63.7952 66.7329C62.9566 66.7265 62.1213 66.6912 61.2827 66.6912C60.8939 66.6912 60.5051 66.7747 60.1131 66.7844C59.4127 66.8036 58.709 66.8068 58.0086 66.794C57.2182 66.7779 56.4117 66.8197 55.6406 66.688C54.8373 66.5498 54.002 66.3474 53.2983 65.965C52.3344 65.4413 51.3223 64.9401 50.6026 64.0436C50.3552 63.7352 50.0435 63.4814 49.7511 63.2115C49.4973 62.9769 49.4555 62.6942 49.4748 62.3697C49.5262 61.5246 49.5423 60.6732 49.6001 59.8282C49.6483 59.1406 49.7415 58.453 49.8057 57.7654C49.8218 57.579 49.7897 57.3895 49.7993 57.2031C49.8411 56.5605 50.8082 55.6544 51.4701 55.6577C51.6018 55.6577 51.7303 55.799 51.891 55.8922C51.891 55.8922 51.9456 55.8922 51.9713 55.8633C52.8292 54.909 54.0244 54.9893 55.1361 54.8383C56.341 54.6745 57.5202 54.893 58.6994 55.1211C59.1524 55.2078 59.6312 55.1661 60.0938 55.2207C60.4376 55.2625 60.775 55.3717 61.1188 55.4488C61.2184 55.4713 61.3373 55.5163 61.4208 55.4809C61.559 55.4263 61.6747 55.3171 61.8 55.2303C61.6779 55.1596 61.5622 55.0536 61.4272 55.0215C60.6272 54.8415 59.8207 54.6713 59.0143 54.5106C58.7122 54.4496 58.4038 54.4303 58.0986 54.3917C58.0889 54.35 58.0825 54.305 58.0729 54.2632L58.0825 54.2664Z" fill="white"/>
                <Path d="M59.0791 67.5361H65.232C64.4481 68.3105 60.9009 68.3008 59.0791 67.5361Z" fill="white"/>
                <Path d="M49.1729 56.8882C48.919 58.4626 48.5752 60.0241 48.8644 61.6917C47.9134 61.2161 48.3535 57.8585 49.1729 56.8882Z" fill="white"/>
                <Path d="M68.7949 61.9199C69.2608 62.871 68.9266 63.7192 68.7949 64.5707C68.9106 63.7224 68.4865 62.8678 68.7949 61.9199Z" fill="white"/>
                </G>
                <Circle cx="57" cy="57" r="56.5" stroke="black"/>
                <Defs>
                <ClipPath id="clip0_36_985">
                <Rect width="60" height="49.0661" fill="white" transform="translate(27 32)"/>
                </ClipPath>
                </Defs>
              </Svg>

            </TouchableOpacity>
            
            <View style={styles.progressContainer}>
              {Array.from({length: MAX_IMAGES}, (_, i) => i + 1).map((num) => (
                <View 
                  key={num} 
                  style={[
                    styles.progressDot,
                    capturedImages.length >= num ? styles.progressDotFilled : null
                  ]}
                />
              ))}
            </View>
            
            <View style={styles.buttonRow}>
              <TouchableOpacity 
                style={[styles.modalActionButton]} 
                onPress={() => {
                  setShowCameraModal(false);
                  if (capturedImages.length > 0) {
                    setShowGallery(true);
                  }
                }}
                disabled={capturedImages.length === 0}
              >
                <Text style={styles.modalActionButtonText}>
                  View Photos 
                </Text>
                <Svg width="13" height="13" viewBox="0 0 13 13" fill="none" >
                <Path d="M12.353 9.84902L12.0196 0.642482L2.81147 0.928064C2.71511 0.918301 2.61777 0.929355 2.52605 0.96048C2.43433 0.991604 2.35037 1.04207 2.27985 1.10847C2.20933 1.17486 2.1539 1.25563 2.11731 1.34531C2.08072 1.43499 2.06383 1.53149 2.06777 1.62826C2.07172 1.72504 2.09641 1.81984 2.14018 1.90624C2.18394 1.99264 2.24576 2.06864 2.32145 2.12907C2.39714 2.1895 2.48493 2.23297 2.57888 2.25653C2.67283 2.28008 2.77074 2.28318 2.86599 2.2656L9.76649 2.06237L0.933264 11.51C0.810801 11.641 0.745386 11.8153 0.75141 11.9945C0.757433 12.1737 0.834402 12.3432 0.965384 12.4657C1.09637 12.5881 1.27063 12.6535 1.44984 12.6475C1.62906 12.6415 1.79853 12.5645 1.921 12.4335L10.7542 2.98586L11.0148 9.88444C11.0215 10.0637 11.0991 10.233 11.2306 10.3551C11.362 10.4772 11.5366 10.542 11.7159 10.5353C11.8952 10.5287 12.0645 10.4511 12.1866 10.3196C12.3087 10.1881 12.3735 10.0135 12.3668 9.83421L12.353 9.84902Z" fill="black"/>
                </Svg>
              </TouchableOpacity>
              
              <TouchableOpacity 
                style={[styles.modalActionButton]} 
                onPress={closeCameraModal}
              >
                <Text style={styles.modalActionButtonText}>close</Text>
              </TouchableOpacity>
            </View>
          </View>
        </View>
      </Modal>

      
      <Modal
        visible={showGallery}
        animationType="slide"
      >
        <View style={styles.galleryContainer}>
          <View style={styles.galleryHeader}>
            <Text style={styles.galleryTitle}>Your Photos</Text>
            
            <TouchableOpacity 
              style={styles.closeButton} 
              onPress={() => setShowGallery(false)}
            >
              <Text>
                <Svg width="23" height="23" viewBox="0 0 23 23" fill="none" >
                <Path d="M16.9761 16.9761L6.02368 6.02368M16.9761 6.02368L6.02368 16.9761" stroke="black" stroke-width="1.09524" stroke-linecap="round" stroke-linejoin="round"/>
                </Svg>

              </Text>
            </TouchableOpacity>
          </View>
          <ScrollView contentContainerStyle={styles.galleryScroll}>
            {capturedImages.map((imageUri, index) => (
              <View key={index} style={styles.galleryImageContainer}>
                
                <View style={styles.bwImageContainer}>
                  <Image 
                    source={{ uri: imageUri }} 
                    style={styles.galleryImage}
                  />
                  <View style={styles.grayscaleOverlay} />
                </View>
              </View>
            ))}
            {capturedImages.length === 0 && (
              <View style={styles.emptyGallery}>
                <Text style={styles.emptyText}>No photos yet!</Text>
                <Text style={styles.emptySubtext}>Use the camera or upload from gallery.</Text>
              </View>
            )}
              <CustomButton
                title="customise photos"
                onPress={() => {
                  setShowGallery(false);
                  navigateToCustomize();
                }}
                disabled={capturedImages.length === 0} 
                checkPhotoLimit={false} 
                style={[styles.bottomButton, styles.viewGalleryRightButton]}
                textStyle={styles.bottomButtonText}
                disabledTextStyle={styles.bottomButtonTextDisabled}
                arrowColor="#000"
              />
          </ScrollView>
        </View>
      </Modal>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    flexDirection: 'row',
    backgroundColor: '#ffffffff',
  },
  rightContainer: {
    flex: 1,
    paddingHorizontal: 30,
    paddingVertical: 60,
    justifyContent: 'space-between',
    paddingLeft: 20,
  },
  buttonContainer: {
    flexDirection: 'column',
    gap: 40,
    marginTop: -150,
  },
  buttonSpacing:{
    display: 'flex',
    flexDirection: 'column',
    gap: 20,
    width: 205,
    borderBottomWidth: 2,         
    borderBottomColor: '#B8B8B8',
    paddingBottom: 18,
    overflow: 'hidden',
  },
  photoCounter: {
    alignItems: 'flex-end',
    marginBottom: 20,
    borderBottomWidth: 2,         
    borderBottomColor: '#B8B8B8',
    paddingBottom: 12,
     marginRight: -20,
  },
  counterText: {
    fontSize: 35,
    fontFamily: 'grotesk',
  },
  photosLabel: {
    fontSize: 18,
    fontFamily: 'grotesk',
    marginTop: 4,
  },
  actionButton: {
    alignItems: 'center',
    paddingVertical: 4,
    paddingHorizontal: 10,
    borderWidth: 1,
    borderColor: '#000',
    borderRadius: 25,
    alignSelf: 'flex-end',
  },
  actionButtonDisabled: {
    borderColor: '#ccc',
  },
  actionButtonText: {
    fontSize: 18,
    color: '#000',
    fontFamily: 'grotesk',
    textTransform: 'uppercase',
    width: '100%',
  },
  actionButtonTextDisabled: {
    color: '#ccc',
  },
 
  bottomButtons: {
     marginBottom: -20,
     flexDirection: 'column',
     gap: 20,
     alignItems: 'flex-start',
  },
  bottomButton: {
    flexDirection: 'row',
    gap: 8,
    alignItems: 'center',
    // marginVertical: 8,
    // alignSelf: 'flex-end',
  },
  viewGalleryRightButton:{
    alignSelf: 'flex-end',
    marginHorizontal: 5,
    alignItems: 'center',
    paddingVertical: 4,
    paddingHorizontal: 15,
    borderWidth: 1,
    borderColor: '#000',
    borderRadius: 25,
    flexDirection: 'row',
    gap: 10,
    // width: '100%',
  },
  bottomButtonText: {
    fontSize: 16,
    fontWeight: 'bold',
    color: '#000',
    fontFamily: 'grotesk',
    textTransform: 'uppercase',
    borderColor: '#000',
    lineHeight: 20,    
  },
  bottomButtonTextDisabled: {
    color: '#777676ff'
  },
  
  // Modal styles
  modalOverlay: {
    flex: 1,
    backgroundColor: 'rgba(0, 0, 0, 0.8)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  modalContent: {
    backgroundColor: 'white',
    borderRadius: 5,
    padding: 30,
    alignItems: 'center',
    minWidth: 320,
    maxWidth: '90%',
  },
  titleText: {
    fontSize: 24,
    fontWeight: 'bold',
    marginBottom: 20,
    color: '#333',
  },
  photoNumberText: {
    fontSize: 18,
    fontWeight: '600',
    marginBottom: 15,
    color: '#666',
  },
  instructionText: {
    fontSize: 16,
    textAlign: 'center',
    marginBottom: 25,
    color: '#777',
    lineHeight: 22,
  },
  takePhotoButton: {
    marginBottom: 30,
    minWidth: 200,
    alignItems: 'center',
  },
  takePhotoText: {
    color: 'white',
    fontSize: 18,
    fontWeight: 'bold',
  },
  progressContainer: {
    flexDirection: 'row',
    marginBottom: 25,
  },
  progressDot: {
    width: 12,
    height: 12,
    borderRadius: 6,
    backgroundColor: '#ddd',
    marginHorizontal: 5,
  },
  progressDotFilled: {
    backgroundColor: '#333333',
  },
  buttonRow: {
    flexDirection: 'row',
    gap: 5,
    marginTop: 20,
    
  },
  modalActionButton: {
    marginHorizontal: 5,
    alignItems: 'center',
    paddingVertical: 4,
    paddingHorizontal: 15,
    borderWidth: 1,
    borderColor: '#000',
    borderRadius: 25,
    flexDirection: 'row',
    gap: 10,
  },
  
  modalActionButtonText: {
    color: 'black',
    fontWeight: 'bold',
    fontSize: 17,
    fontFamily: 'grotesk',
    textTransform: 'uppercase',
  },
  galleryContainer: {
    flex: 1,
    backgroundColor: 'white',
  },
  galleryHeader: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    padding: 20,
    paddingTop: 60,
    borderBottomWidth: 2,
    borderBottomColor: '#B8B8B8',
  },
  galleryTitle: {
    fontSize: 25,
    fontFamily: 'grotesk',
  },
  closeButton: {
    padding: 10,
    borderRadius: 8,
    transform: [{ scale: 1.5 }],
  },
  
  galleryScroll: {
    padding: 30,
  },
  galleryImageContainer: {
    marginBottom: 30,
    alignItems: 'center',
  },
  imageLabel: {
    fontSize: 16,
    fontWeight: '600',
    color: '#666',
    marginBottom: 10,
  },
  bwImageContainer: {
    position: 'relative',
  },
  galleryImage: {
    width: 300,
    height: 300,
    borderRadius: 5,
  },
  grayscaleOverlay: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    backgroundColor: '#888888',
    borderRadius: 10,
    opacity: 0.4,
    mixBlendMode: 'saturation',
  },
  emptyGallery: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    paddingVertical: 50,
  },
  emptyText: {
    fontSize: 18,
    fontWeight: 'bold',
    color: '#666',
    marginBottom: 10,
  },
  emptySubtext: {
    fontSize: 14,
    color: '#999',
  },
  leftContainer: {
  width: width * 0.4,
  justifyContent: 'flex-end',
  alignItems: 'center',
  borderWidth: 2,
  borderColor: '#B8B8B8',
},
verticalTextContainer: {
  flexDirection: 'column',
},
verticalLetter: {
  fontSize: 75,
  fontWeight: 'bold',
  color: '#000',
  fontFamily: 'grotesk',
  textAlign: 'left',
  transform: [{ rotate: '-90deg' }], 
  textTransform: 'uppercase',
},
clearPhotosContainer:{
  paddingVertical: 4,
  paddingHorizontal: 10,
  borderWidth: 1,
  borderColor: '#000',
  borderRadius: 25,
  // flex : 1,
  backgroundColor: '#000',
},
clearPhotosText: {
  fontSize: 16,
  color: 'white',
  fontFamily: 'grotesk',
  textTransform: 'uppercase',
  },
});